{% extends "base.html" %}

{% block title %}All Events{% endblock %}

{% block content %}
<div class="content-header">
    <h1>All Events</h1>
</div>

<div id="event-list" class="event-list">
    {% include 'events/_event_cards.html' %}
</div>
{% endblock %}

{% block scripts %}
<script>
    // Intersection Observer for infinite scroll
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const loadMore = entry.target;
                if (loadMore.dataset.loadMore) {
                    loadMore.click();
                    observer.unobserve(loadMore);
                }
            }
        });
    });

    // Observe the load more element when it's added
    document.body.addEventListener('htmx:afterSwap', (evt) => {
        const loadMore = evt.detail.target.querySelector('[data-load-more]');
        if (loadMore) {
            observer.observe(loadMore);
        }
    });

    // Initial observation
    document.addEventListener('DOMContentLoaded', () => {
        const loadMore = document.querySelector('[data-load-more]');
        if (loadMore) {
            observer.observe(loadMore);
        }
    });
</script>
{% endblock %} 